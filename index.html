<!DOCTYPE html>
<html lang="lt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Konstruktyvi komunikacija: jausmai, poreikiai, prašymai</title>
    <link rel="stylesheet" href="index.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <script type="importmap">
      {
        "imports": {
          "@google/genai": "https://esm.sh/@google/genai@^0.7.0",
          "jspdf": "https://esm.sh/jspdf@^2.5.1"
        }
      }
    </script>
    <script type="module" src="index.tsx" defer></script>
</head>
<body>
    <header>
        <h1>Konstruktyvi komunikacija: jausmai, poreikiai, prašymai</h1>
        <p>Jūsų įrankis empatiškam bendravimui</p>
    </header>

    <nav>
        <button id="nav-reframer" class="active" aria-current="page">Prašymų įrankis</button>
        <button id="nav-explorer" aria-current="false">Jausmai ir poreikiai</button>
        <button id="nav-journey" aria-current="false">Mano kelionė</button>
        <button id="nav-practice" aria-current="false">Praktika</button>
        <button id="nav-guide" aria-current="false">NVC principai</button>
    </nav>

    <main>
        <section id="reframer-section" class="content-section active">
            <h2>Prašymų performulavimo įrankis</h2>
            <p>Paverskite neaiškius norus į konkrečius, įgyvendinamus prašymus, pagrįstus NVC principais.</p>
            <div class="reframer-container">
                <div class="input-group">
                    <label for="user-input">Jūsų sakinys:</label>
                    <div class="textarea-container">
                        <textarea id="user-input" rows="4" placeholder="Pvz., „Norėčiau, kad parodytum nors truputį pagarbos.“"></textarea>
                        <div class="textarea-controls">
                            <button id="mic-button" title="Įvesti balsu" aria-label="Įvesti balsu">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="24" height="24">
                                    <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
                                    <path d="M17.3 11c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.49 6-3.31 6-6.72h-1.7z"/>
                                </svg>
                            </button>
                            <button id="voice-settings-button" title="Balso nustatymai" aria-label="Balso nustatymai">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="24" height="24">
                                    <path d="M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"/>
                                </svg>
                            </button>
                        </div>
                    </div>

                    <div class="audience-selector">
                        <label>Kam skirtas prašymas?</label>
                        <div class="radio-group">
                            <div>
                                <input type="radio" id="audience-child" name="audience" value="child">
                                <label for="audience-child">Vaikui</label>
                            </div>
                            <div>
                                <input type="radio" id="audience-partner" name="audience" value="partner">
                                <label for="audience-partner">Tėvams</label>
                            </div>
                            <div>
                                <input type="radio" id="audience-colleague" name="audience" value="colleague" checked>
                                <label for="audience-colleague">Darbuotojui</label>
                            </div>
                        </div>
                    </div>

                    <button id="rephrase-button">Performuluoti</button>
                </div>
                <div class="output-group">
                    <label>Konstruktyvus bendravimo pasiūlymas:</label>
                    <div class="output-wrapper">
                        <div id="gemini-output" aria-live="polite">
                            <p class="placeholder">Čia atsiras performuluotas prašymas pagal nesmurtinės komunikacijos principus...</p>
                        </div>
                        <div id="share-container" class="share-container hidden">
                            <button id="share-button" title="Dalintis">Dalintis</button>
                            <div id="share-dropdown" class="share-dropdown hidden">
                                <button id="copy-button">Kopijuoti tekstą</button>
                                <button id="email-button">Siųsti el. paštu</button>
                                <button id="save-txt-button">Išsaugoti kaip .txt</button>
                                <button id="save-pdf-button">Išsaugoti kaip .pdf</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="explorer-section" class="content-section">
            <h2>Jausmų ir poreikių tyrinėjimas</h2>
            <div class="examples-section">
                <button id="show-examples-button">Rodyti sakinių pavyzdžius</button>
                <div id="examples-container" class="hidden" aria-live="polite">
                    <!-- Examples will be rendered here by JS -->
                </div>
            </div>
            <div class="situation-analyzer">
                <h3>Situacijos analizatorius</h3>
                <p>Aprašykite situaciją ir gaukite pasiūlymų, kokie jausmai ir poreikiai galėjo kilti.</p>
                <div class="input-group">
                    <label for="situation-input">Jūsų situacija:</label>
                    <textarea id="situation-input" rows="3" placeholder="Pvz., „Kai kolega pertraukė mane per susirinkimą...“"></textarea>
                    <button id="analyze-situation-button">Analizuoti situaciją</button>
                </div>
                <div id="situation-output" class="output-group hidden" aria-live="polite">
                    <!-- AI suggestions will appear here -->
                </div>
            </div>
            <div class="explorer-actions">
                <button id="toggle-explorer-lists-button">Rodyti jausmų ir poreikių sąrašus</button>
                <button id="export-explorer-button" title="Atsisiųsti jausmų ir poreikių sąrašus PDF formatu">Atsisiųsti PDF</button>
            </div>
            <div id="saved-items-container" class="saved-items-container hidden">
                <h3>⭐ Išsaugoti terminai</h3>
                <ul id="saved-items-list">
                    <!-- Saved items will be dynamically inserted here -->
                </ul>
                <p id="no-saved-items" class="placeholder">Kol kas nieko neišsaugojote. Spustelėkite žvaigždutę šalia termino, kad jį pridėtumėte.</p>
            </div>
            <div id="explorer-container" class="explorer-container hidden">
                <div class="feelings-container">
                    <h3>Jausmai, kai poreikiai...</h3>
                    <div class="tabs">
                        <button class="tab-link active" data-tab="met">...yra patenkinti</button>
                        <button class="tab-link" data-tab="unmet">...nėra patenkinti</button>
                    </div>
                    <div id="feelings-met" class="tab-content active"></div>
                    <div id="feelings-unmet" class="tab-content"></div>
                </div>
                <div class="needs-container">
                    <h3>Poreikiai</h3>
                    <div id="needs-list"></div>
                </div>
            </div>
        </section>

        <section id="journey-section" class="content-section">
            <!-- Dashboard will be rendered here by JS -->
        </section>

        <section id="practice-section" class="content-section">
            <h2>NVC praktika: interaktyvūs žaidimai</h2>
            
            <!-- Game Selection Menu -->
            <div id="game-selection-menu">
                 <p>Pasirinkite žaidimą ir sustiprinkite savo NVC įgūdžius interaktyviu būdu.</p>
                 <div class="game-selection-container">
                     <button class="game-selection-card" data-game="guess-need">
                         <h4>Atspėk Poreikį</h4>
                         <p>Išmokite atpažinti poreikius, slypinčius už sudėtingų frazių.</p>
                     </button>
                     <button class="game-selection-card" data-game="empathetic-response">
                         <h4>Sukurk empatišką atsakymą</h4>
                         <p>Praktikuokitės atsakyti empatiškai, o ne reaguoti įprastai.</p>
                     </button>
                     <button class="game-selection-card" data-game="connect-feelings-needs">
                        <h4>Jausmų ir poreikių sujungimas</h4>
                        <p>Sustiprinkite ryšį tarp to, ką jaučiate, ir to, ko jums reikia.</p>
                    </button>
                 </div>
            </div>

            <!-- Game Containers (all hidden initially) -->
            <div id="game-container-all" class="hidden">
                <button id="back-to-games-button">&larr; Grįžti į žaidimų pasirinkimą</button>

                <!-- Game: Guess the Need -->
                <div id="game-guess-need" class="game-view">
                    <h3>Žaidimas: Atspėk Poreikį</h3>
                    <p class="game-description">Perskaitykite teiginį ir per 15 sekundžių išrinkite, koks nepatenkintas poreikis už jo greičiausiai slypi.</p>

                    <div id="game-summary" class="game-summary hidden">
                        <h4>Žaidimas baigtas!</h4>
                        <p>Jūsų rezultatas:</p>
                        <div id="final-score" class="final-score"></div>
                        <button id="play-again-button">Žaisti iš naujo</button>
                    </div>
                    
                    <div id="game-card" class="game-card">
                        <div id="game-stats" class="game-stats hidden">
                            <div class="stat-timer">
                                Laikas: <span id="game-timer-display">15</span>s
                            </div>
                            <div class="stat-score">
                                Taškai: <span id="game-score-display">0</span>
                            </div>
                        </div>
                        <div id="game-scenario-container">
                            <p class="scenario-label">Situacija:</p>
                            <blockquote id="game-scenario">
                                Spauskite "Pradėti žaidimą", kad gautumėte pirmąją situaciją.
                            </blockquote>
                        </div>
                        <div id="game-options" class="game-options"></div>
                        <div id="game-feedback" class="game-feedback hidden" aria-live="polite"></div>
                        <div class="game-controls">
                            <button id="game-control-button">Pradėti žaidimą</button>
                        </div>
                    </div>
                </div>

                <!-- Game: Empathetic Response -->
                <div id="game-empathetic-response" class="game-view hidden">
                    <h3>Žaidimas: Sukurk empatišką atsakymą</h3>
                    <p class="game-description">Jūsų draugas sako... Perskaitykite situaciją ir pasirinkite empatiškiausią atsakymą.</p>
                    <div class="game-card">
                        <div class="scenario-container">
                             <p class="scenario-label">Draugo žodžiai:</p>
                             <blockquote id="er-game-scenario">...</blockquote>
                        </div>
                        <div id="er-game-options" class="game-options vertical-options"></div>
                        <div id="er-game-feedback" class="game-feedback hidden" aria-live="polite"></div>
                        <div class="game-controls">
                            <button id="er-game-control-button">Kita situacija</button>
                        </div>
                    </div>
                </div>

                <!-- Game: Connect Feelings & Needs -->
                <div id="game-connect-feelings-needs" class="game-view hidden">
                    <h3>Žaidimas: Jausmų ir poreikių sujungimas</h3>
                    <p class="game-description">Nutempkite tinkamą poreikio kortelę ant jausmo kortelės, kad atrastumėte ryšį.</p>
                    <div class="game-card connect-game-card">
                        <div id="cfn-drop-zone" class="drop-zone">
                            <p class="scenario-label">Jausmas:</p>
                            <div id="cfn-feeling-card" class="feeling-card">...</div>
                        </div>
                        <div id="cfn-drag-options" class="draggable-options"></div>
                        <div id="cfn-game-feedback" class="game-feedback hidden" aria-live="polite"></div>
                        <div class="game-controls">
                             <button id="cfn-game-control-button">Kitas jausmas</button>
                        </div>
                    </div>
                </div>

            </div>
        </section>

        <section id="guide-section" class="content-section">
            <h2>Nesmurtinės komunikacijos principai</h2>
            <article class="nvc-guide">
                <div class="nvc-summary">
                    <h4>Kas yra NVC?</h4>
                    <p>
                        Tai daugiau nei bendravimo technika – tai sąmoningumo praktika, leidžianti kurti ryšį, pagrįstą empatija ir nuoširdumu. NVC moko išgirsti giliausius savo ir kitų poreikius, kurie slypi už žodžių ir veiksmų. Praktikuodami NVC, galime efektyviau spręsti konfliktus, stiprinti asmeninius ir profesinius santykius bei pasiekti gilesnį savęs supratimą.
                    </p>
                </div>
                <p>Nesmurtinė komunikacija (NVC), sukurta Marshall Rosenberg, padeda kurti pagarbius ir nuoširdžius santykius. Ji remiasi keturiais pagrindiniais principais:</p>
                <ol>
                    <li>
                        <h3>Stebėjimas be vertinimo</h3>
                        <p>Apibūdinkite situaciją objektyviai, neinterpretuodami. <br><em>Pvz., vietoj „Tu visada vėluoji!“ sakykite „Šiandien atvykai 20 minučių vėliau nei sutarta.“</em></p>
                    </li>
                    <li>
                        <h3>Jausmų įvardijimas</h3>
                        <p>Aiškiai išsakykite, ką jaučiate, be kaltinimų. <br><em>Pvz., vietoj „Tu mane nervuoji!“ sakykite „Jaučiuosi susierzinęs, kai tenka ilgai laukti.“</em></p>
                    </li>
                    <li>
                        <h3>Poreikių atpažinimas</h3>
                        <p>Išsakykite, koks jūsų poreikis slypi už jausmų. <br><em>Pvz., „Man svarbu punktualumas, nes noriu jaustis gerbiamas.“</em></p>
                    </li>
                    <li>
                        <h3>Aiškus ir konstruktyvus prašymas</h3>
                        <p>Pateikite aiškų, įgyvendinamą prašymą, o ne reikalavimą. <br><em>Pvz., „Ar kitą kartą galėtum atvykti sutartu laiku arba pranešti, jei vėluosi?“</em></p>
                    </li>
                </ol>
                <h4>Papildomi svarbūs aspektai:</h4>
                <ul>
                    <li><strong>Empatija:</strong> Išklausyti kitą žmogų be vertinimo, stengiantis suprasti jo jausmus ir poreikius.</li>
                    <li><strong>Atsakomybė už savo jausmus:</strong> Pripažinti, kad mūsų jausmai kyla iš mūsų poreikių, o ne iš kitų veiksmų.</li>
                    <li><strong>Sąmoningumas:</strong> Būti atidiems savo kalbai, kad neskatintume konflikto.</li>
                </ul>

                <h4>Pavyzdžiai: Kreipiniai mokytojams</h4>
                <p class="example-group-description">Šie pavyzdžiai skirti spręsti situacijas, susijusias su profesine etika ir atsakomybėmis.</p>
                <div class="example">
                    <h5>Dėl vėlavimo</h5>
                    <p>"Pastebėjau, kad šiandien vėlavote į pamoką. Aš jaučiuosi sunerimęs, nes man svarbu užtikrinti pamokos nuoseklumą. Norėčiau jūsų paprašyti ateityje atvykti laiku, kad pamokos netrikdytų vėlavimas."</p>
                </div>
                <div class="example">
                    <h5>Dėl mokinių saugumo</h5>
                    <p>"Pastebėjau, kad neatvykote į savo postą per pertrauką. Jaučiuosi susirūpinęs, nes man svarbu užtikrinti, kad mokiniai jaustųsi saugiai. Ar galėtumėte ateityje pasirūpinti, kad būtumėte savo vietoje nustatytu laiku?"</p>
                </div>
                <div class="example">
                    <h5>Dėl apkalbų</h5>
                    <p>"Išgirdau, kaip šiandien per posėdį neigiamai kalbėjote apie kitą mokinį. Jaučiuosi nepatogiai, nes man svarbu, kad kritika būtų konstruktyvi. Ar galėtumėte ateityje, jei turite kritikos, aptarti ją su mokiniu ar kolega asmeniškai, o ne viešai?"</p>
                </div>
                <div class="example">
                    <h5>Dėl el. dienyno pildymo</h5>
                    <p>"Pastebėjau, kad jau kelias dienas nėra jokių įrašų jūsų el. dienyne. Jaučiuosi sunerimęs, nes man svarbu, kad tėvai būtų nuolat informuojami apie savo vaiko pažangą. Ar galėtumėte dėti įrašus laiku, kad tėvai galėtų sekti savo vaiko pažangą?"</p>
                </div>
                <div class="example">
                    <h5>Dėl neatsakytų laiškų</h5>
                    <p>"Pastebėjau, kad neatsakėte į mano praėjusios savaitės el. laišką. Jaučiuosi susirūpinęs, nes man svarbu, kad komunikacija tarp mūsų būtų sklandi. Ar galėtumėte peržiūrėti savo el. paštą ir atsakyti į laišķus, kad mes galėtume efektyviai dirbti?"</p>
                </div>

                <h4>Pavyzdžiai: Kreipiniai tėvams</h4>
                <p class="example-group-description">Šie pavyzdžiai orientuoti į konstruktyvų dialogą su tėvais, vengiant kaltinimų ir skatinant bendradarbiavimą.</p>
                <div class="example">
                    <h5>Dėl piktų laiškų</h5>
                    <p>"Gavau jūsų el. laišką, kuriame pastebėjau stiprų toną. Jaučiuosi sunerimęs, nes man svarbu, kad mes bendrautume pagarbiai ir išklausytume vienas kitą. Ar galėtume pasikalbėti, kad suprasčiau jūsų poziciją ir išspręstume nesusipratimą?"</p>
                </div>
                <div class="example">
                    <h5>Dėl duomenų viešinimo</h5>
                    <p>"Išgirdau, kad pasidalinote kito mokinio vardu ir pavarde socialiniuose tinkluose. Jaučiuosi susirūpinęs, nes man svarbu, kad būtų gerbiamas visų mokinių privatumas. Ar galėtumėte ateityje gerbti kitų mokinių duomenis ir jų neviešinti?"</p>
                </div>
                <div class="example">
                    <h5>Dėl el. dienyno</h5>
                    <p>"Pastebėjau, kad nesijungėte į el. dienyną jau ilgą laiką. Jaučiuosi susirūpinęs, nes man svarbu, kad žinotumėte, kaip jūsų vaikui sekasi. Ar galėtumėte prisijungti prie el. dienyno ir peržiūrėti vaiko pažangą bei lankomumą, kad mes galėtume laiku aptarti galimus sunkumus?"</p>
                </div>
                <div class="example">
                    <h5>Dėl praleistų pamokų</h5>
                    <p>"Pastebėjau, kad jūsų vaikas nebuvo pamokose jau kelias dienas, ir neturime jokio paaiškinimo dėl praleistų pamokų. Jaučiuosi sunerimęs, nes man svarbu žinoti, ar viskas gerai ir kad vaikas nepraleistų svarbių dalykų pamokose. Ar galėtumėte atsiųsti paaiškinimą, kad žinotume, kad jūsų vaikas saugus, ir kad galėtume kartu rasti sprendimą, kaip spręsti praleistas pamokas?"</p>
                </div>
                 <div class="example">
                    <h5>Dėl sveikatos pažymos</h5>
                    <p>"Pastebėjau, kad dar negavome vaiko sveikatos pažymos, o terminas jau pasibaigė. Jaučiuosi susirūpinęs, nes man svarbu, kad mokykla turėtų naujausią informaciją apie vaiką ir galėtų užtikrinti jo saugumą. Ar galėtumėte pasirūpinti, kad pažyma būtų pristatyta, kad mokykla turėtų visą reikiamą informaciją?"</p>
                </div>

            </article>
        </section>
    </main>

    <div id="modal-container" class="modal-container hidden" role="dialog" aria-modal="true" aria-labelledby="modal-title">
        <div id="modal-overlay" class="modal-overlay"></div>
        <div class="modal-content">
            <button id="modal-close-button" class="modal-close" aria-label="Uždaryti">&times;</button>
            <h3 id="modal-title"></h3>
            <p id="modal-body"></p>
            <div id="modal-related-container" class="hidden">
                <h4 id="modal-related-title"></h4>
                <div id="modal-related-list"></div>
            </div>
        </div>
    </div>

    <div id="voice-modal-container" class="modal-container hidden" role="dialog" aria-modal="true" aria-labelledby="voice-modal-title">
        <div id="voice-modal-overlay" class="modal-overlay"></div>
        <div class="modal-content">
            <button id="voice-modal-close-button" class="modal-close" aria-label="Uždaryti">&times;</button>
            <h3 id="voice-modal-title">Balso įvesties nustatymai</h3>
            <div id="voice-modal-body" class="modal-form-body">
                <div class="form-group">
                    <label for="language-select">Atpažinimo kalba</label>
                    <select id="language-select">
                        <option value="lt-LT">Lietuvių</option>
                        <option value="en-US">English (US)</option>
                    </select>
                </div>
            </div>
            <div class="modal-actions">
                <button id="save-voice-settings-button">Išsaugoti pakeitimus</button>
            </div>
        </div>
    </div>


    <footer>
        <p>Sukurta remiantis NVC medžiaga, pagal Dr. Maršalas Rozenbergą - <a href="https://www.youtube.com/watch?v=2TvvniiNTk8" target="_blank" rel="noopener noreferrer">https://www.youtube.com/watch?v=2TvvniiNTk8</a>.</p>
    </footer>
</body>
</html>